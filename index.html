<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bem-Vindo ao Natal Ecotec</title>
    <!-- Link para fontes mais bonitas -->
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700&family=Sacramento&family=Playfair+Display&family=Cookie&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="index.css">
    <style>
        /* Estilos para a caixinha de presentes errados */
        #caixinha {
            margin-top: 20px;
            padding: 15px;
            border-radius: 12px;
            width: 320px;
            height: 180px;
            overflow-y: auto;
            background-color: #f0f0f0;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            border: 2px solid #ff6f61;
            transition: background-color 0.3s ease, transform 0.2s ease;
        }

        #caixinha h3 {
            font-family: 'Sacramento', cursive;
            font-size: 18px;
            color: #ff6f61;
            text-align: center;
            margin-bottom: 10px;
        }

        .presente-erro {
            margin-bottom: 15px;
            padding: 12px;
            background-color: #ff9f80;
            border-radius: 10px;
            text-align: center;
            color: #ffffff;
            font-size: 16px;
            font-weight: bold;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            animation: bounceIn 0.5s ease;
        }

        .presente-erro img {
            width: 30px;
            vertical-align: middle;
            margin-right: 10px;
        }

        /* Anima√ß√£o de entrada para os presentes errados */
        @keyframes bounceIn {
            0% { transform: translateY(-30px); opacity: 0; }
            50% { transform: translateY(15px); opacity: 1; }
            100% { transform: translateY(0); opacity: 1; }
        }

        #caixinha:hover {
            background-color: #ffefe6;
            transform: scale(1.05);
        }

        /* Estilo dos bot√µes e outros elementos */
        .button {
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
            background-color: #ff6f61;
            color: white;
            border: none;
            border-radius: 5px;
            transition: background-color 0.3s;
        }

        .button:hover {
            background-color: #ff4d3a;
        }

        /* Estilo das zonas de drop e presentes */
        .drop-zone {
            width: 80px;
            height: 80px;
            border: 2px solid #ccc;
            border-radius: 10px;
            margin: 10px;
            display: inline-block;
            position: relative;
            background-color: #f8f8f8;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        .present {
            width: 60px;
            height: 60px;
            margin: 5px;
            cursor: pointer;
        }

        /* Outras personaliza√ß√µes podem ser feitas conforme necess√°rio */
    </style>
</head>
<body>
    <!-- Efeitos de flocos de neve -->
    <div class="snowflakes">
        <div class="snowflake" style="left: 10%; animation-duration: 8s;">‚ùÑÔ∏è</div>
        <div class="snowflake" style="left: 20%; animation-duration: 12s;">‚ùÑÔ∏è</div>
        <div class="snowflake" style="left: 40%; animation-duration: 15s;">‚ùÑÔ∏è</div>
        <div class="snowflake" style="left: 60%; animation-duration: 10s;">‚ùÑÔ∏è</div>
        <div class="snowflake" style="left: 80%; animation-duration: 20s;">‚ùÑÔ∏è</div>
        <div class="snowflake" style="left: 90%; animation-duration: 14s;">‚ùÑÔ∏è</div>
    </div>

    <!-- Conte√∫do inicial -->
    <div class="content" id="initial-content">
        <h1>üéÑ BEM VINDO(A) üéÑ</h1>
        <h2>AO NATAL ECOTEC DO SENAI</h2>
        <button class="button" onclick="start()">Aperte aqui para come√ßar</button>
    </div>

    <!-- Jogo de Natal -->
    <div class="game-container" id="game-container" style="display: none;">
        <h2>Organize os Presentes!</h2>

        <!-- Zonas de drop -->
        <div class="drop-zone-container">
            <div class="drop-zone" id="zone-green" data-color="green" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
            <div class="drop-zone" id="zone-red" data-color="red" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
            <div class="drop-zone" id="zone-yellow" data-color="yellow" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
            <div class="drop-zone" id="zone-blue" data-color="blue" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
        </div>

        <!-- Presentes -->
        <div class="presents">
            <img src="https://png.pngtree.com/png-vector/20231020/ourmid/pngtree-green-gift-box-png-image_10237206.png" class="present green" id="present-green" data-color="green" draggable="true" ondragstart="drag(event)">
            <img src="https://png.pngtree.com/png-vector/20240205/ourlarge/pngtree-red-gift-box-present-png-image_11615108.png" class="present red" id="present-red" data-color="red" draggable="true" ondragstart="drag(event)">
            <img src="https://png.pngtree.com/png-vector/20240205/ourlarge/pngtree-yellow-gift-box-present-png-image_11543425.png" class="present yellow" id="present-yellow" data-color="yellow" draggable="true" ondragstart="drag(event)">
            <img src="https://png.pngtree.com/png-vector/20230831/ourlarge/pngtree-a-dark-blue-gift-box-decorated-by-blue-ribbons-in-the-png-image_9192771.png" class="present blue" id="present-blue" data-color="blue" draggable="true" ondragstart="drag(event)">
        </div>

        <!-- Mensagem de vit√≥ria -->
        <div class="victory-message" id="victory-message" style="display: none;">
            Tenha um Feliz Natal!
        </div>

        <!-- Caixinha de presentes errados -->
        <div id="caixinha">
            <h3>Presentes Errados:</h3>
        </div>
    </div>

    <script>
        let currentAttempt = 0; // Contador de tentativas

        function start() {
            // Esconde o conte√∫do inicial e mostra o jogo
            document.getElementById('initial-content').style.display = 'none';
            document.getElementById('game-container').style.display = 'block';
            document.getElementById('victory-message').style.display = 'none';
            resetGame();
        }

        function resetGame() {
            // Reseta as zonas e os presentes
            document.querySelectorAll('.drop-zone').forEach(zone => {
                zone.innerHTML = '';
                zone.classList.remove('correct');
                zone.classList.remove('error');
            });
            document.querySelectorAll('.present').forEach(present => {
                present.style.position = 'relative';
                present.style.left = '';
                present.style.top = '';
            });
        }

        // Fun√ß√£o para permitir o arraste dos presentes
        function drag(event) {
            event.dataTransfer.setData("id", event.target.id);
        }

        // Fun√ß√µes para permitir o drop dos presentes nas zonas certas
        function allowDrop(event) {
            event.preventDefault();
        }

        function drop(event) {
            event.preventDefault();
            var data = event.dataTransfer.getData("id");
            var droppedPresent = document.getElementById(data);
            var zone = event.target;

            // Verifica se a zona de drop e o presente s√£o da mesma cor
            if (zone.dataset.color === droppedPresent.classList[1]) {
                zone.appendChild(droppedPresent);
                droppedPresent.style.position = "absolute"; // Mant√©m o presente dentro da zona
                droppedPresent.style.left = "0";
                droppedPresent.style.top = "0";
                zone.classList.add('correct');
                checkVictory();
            } else {
                zone.classList.add('error');
                setTimeout(() => zone.classList.remove('error'), 500);

                // Adiciona o presente errado na caixinha
                addIncorrectPresent(droppedPresent);
                currentAttempt++;

                // Se o n√∫mero de tentativas for 3, o jogador perde
                if (currentAttempt >= 3) {
                    alert("Voc√™ perdeu! Tente novamente.");
                    resetGame();
                    currentAttempt = 0;
                }
            }
        }

        function addIncorrectPresent(present) {
            const caixinha = document.getElementById('caixinha');
            const presenteErro = document.createElement('div');
            presenteErro.classList.add('presente-erro');
            presenteErro.innerHTML = `<img src="${present.src}" alt="Presente Errado"> Presente errado!`;
            caixinha.appendChild(presenteErro);
        }

        // Verifica se o jogador completou o jogo
        function checkVictory() {
            var allCorrect = document.querySelectorAll('.drop-zone.correct').length === 4;
            if (allCorrect) {
                document.getElementById('victory-message').style.display = 'block';
            }
        }

        // C√≥digo de arrastar para dispositivos m√≥veis
        document.addEventListener("DOMContentLoaded", function() {
            let draggedItem = null;

            // Selecionar os elementos do presente e da zona de drop
            const presents = document.querySelectorAll('.present');
            const dropZones = document.querySelectorAll('.drop-zone');

            // Fun√ß√£o para manipular o evento de toque em dispositivos m√≥veis
            function startDrag(e) {
                e.preventDefault();  // Previne o comportamento padr√£o
                const touch = e.touches[0];
                draggedItem = e.target;
                draggedItem.style.position = "absolute";
                draggedItem.style.zIndex = 1000; // Coloca o item sobre os outros
                updateDraggedItemPosition(touch.clientX, touch.clientY);
            }

            // Fun√ß√£o para mover o presente enquanto √© arrastado
            function dragMove(e) {
                if (!draggedItem) return;
                const touch = e.touches[0];
                updateDraggedItemPosition(touch.clientX, touch.clientY);
            }

            // Fun√ß√£o para atualizar a posi√ß√£o do presente
            function updateDraggedItemPosition(x, y) {
                draggedItem.style.left = x - draggedItem.offsetWidth / 2 + "px";
                draggedItem.style.top = y - draggedItem.offsetHeight / 2 + "px";
            }

            // Fun√ß√£o para soltar o item
            function dropItem(e) {
                e.preventDefault();
                if (!draggedItem) return;
                const touch = e.changedTouches[0];
                let targetZone = null;
                dropZones.forEach(zone => {
                    const rect = zone.getBoundingClientRect();
                    if (touch.clientX > rect.left && touch.clientX < rect.right &&
                        touch.clientY > rect.top && touch.clientY < rect.bottom) {
                        targetZone = zone;
                    }
                });

                if (targetZone) {
                    // Verifica se o presente foi solto na zona correta
                    if (targetZone.dataset.color === draggedItem.classList[1]) {
                        targetZone.appendChild(draggedItem);
                        draggedItem.style.position = "absolute";
                        draggedItem.style.left = "0";
                        draggedItem.style.top = "0";
                        targetZone.classList.add('correct');
                    } else {
                        targetZone.classList.add('error');
                    }
                }

                draggedItem.style.position = "relative";
                draggedItem.style.zIndex = "";
                draggedItem = null;
            }

            presents.forEach(present => {
                present.addEventListener("touchstart", startDrag, false);
                present.addEventListener("touchmove", dragMove, false);
                present.addEventListener("touchend", dropItem, false);

                present.addEventListener("mousedown", startDrag, false);
                present.addEventListener("mousemove", dragMove, false);
                present.addEventListener("mouseup", dropItem, false);
            });
        });
    </script>
</body>
<script src="mqttws31.js"></script>
<script src="index.js"></script>
</html>
